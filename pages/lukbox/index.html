<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Lukbox | Sistema de Tutoriais</title>
<link rel="stylesheet" href="../../assets/css/lukbox.css">
</head>
<body>

<!-- MENU LATERAL -->
<aside class="sidebar">
  <div class="sidebar-logo">
    <a href="#" onclick="carregarPagina('inicio.html')">
      <img src="../../assets/img/lukbox.png" alt="Lukbox">
    </a>
  </div>

<a href="#" onclick="carregarPagina('login.html', this); return false;">Login</a>
<a href="#" onclick="carregarPagina('utilidades.html', this); return false;">Utilidades</a>
<a href="#" onclick="carregarPagina('home.html', this); return false;">Home</a>
<a href="#" onclick="carregarPagina('notificacoes.html', this); return false;">Minhas Notificações</a>
<div class="menu-group">
  <a href="#" class="menu-parent" onclick="toggleSubmenu(this); return false;">
    Minhas Vendas
  </a>

  <div class="submenu">
    <a href="#" onclick="carregarPagina('vendas-pedidos.html', this); return false;">Pedidos</a>
    <a href="#" onclick="carregarPagina('vendas-orcamentos.html', this); return false;">Orçamentos</a>
  </div>
</div>
<a href="#" onclick="carregarPagina('prospects.html', this); return false;">Meus Prospects</a>
<a href="#" onclick="carregarPagina('contatos.html', this); return false;">Meus Contatos</a>
<a href="#" onclick="carregarPagina('metas.html', this); return false;">Minhas Metas</a>
<a href="#" onclick="carregarPagina('produtos.html', this); return false;">Produtos</a>
<a href="#" onclick="carregarPagina('comissoes.html', this); return false;">Minhas Comissões</a>

  <hr style="margin:15px 0;border-color:#1e293b">

  <a href="../../index.html">⬅ Trocar sistema</a>

  <!-- LOGO NO RODAPÉ -->
  <div class="sidebar-footer">
    <a href="https://wa.me/5517996074665" target="_blank" rel="noopener noreferrer">
      <img src="../../assets/img/logo.png" alt="Lukbox">
    </a>
        <p style="margin-top:15px;font-size:14px;color:#475569">
      Suporte
    </p>
  </div>
</aside>

<!-- CONTEÚDO DINÂMICO -->
<main class="content" id="content">
  <!-- Conteúdo carregado via JavaScript -->
</main>

<script>
function fecharTodosSubmenus() {
  document.querySelectorAll(".menu-group").forEach(group => {
    group.classList.remove("open");
    const parent = group.querySelector(".menu-parent");
    if (parent) parent.classList.remove("active");
  });
}

function toggleSubmenu(element) {
  const group = element.closest(".menu-group");
  const aberto = group.classList.contains("open");

  // Fecha tudo antes
  fecharTodosSubmenus();

  // Se não estava aberto, abre
  if (!aberto) {
    group.classList.add("open");
    element.classList.add("active");
  }
}

function carregarPagina(pagina, linkClicado = null) {
  fetch(pagina)
    .then(response => {
      if (!response.ok) throw new Error("Erro ao carregar");
      return response.text();
    })
    .then(html => {
      document.getElementById("content").innerHTML = html;

      // Remove todos os ativos
      document.querySelectorAll(".sidebar a").forEach(a => {
        a.classList.remove("active");
      });

      // Fecha todos os submenus ao trocar de menu
      fecharTodosSubmenus();

      if (linkClicado) {
        linkClicado.classList.add("active");

        // Se for submenu, mantém o pai aberto e ativo
        const group = linkClicado.closest(".menu-group");
        if (group) {
          group.classList.add("open");
          const parent = group.querySelector(".menu-parent");
          if (parent) parent.classList.add("active");
        }
      }
    })
    .catch(() => {
      document.getElementById("content").innerHTML = `
        <div class="tutorial-box">
          <h2>Erro</h2>
          <p>Não foi possível carregar o conteúdo.</p>
        </div>
      `;
    });
}
</script>

</body>
</html>

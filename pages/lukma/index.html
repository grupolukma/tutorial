<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Lukma | Sistema de Tutoriais</title>
<link rel="stylesheet" href="../../assets/css/lukma.css">
</head>
<body>

<!-- MENU LATERAL -->
<aside class="sidebar">
  <div class="sidebar-logo">
    <a href="#" onclick="carregarPagina('inicio.html'); return false;">
      <img src="../../assets/img/lukma.png" alt="Lukma">
    </a>
  </div>

<a href="#" onclick="carregarPagina('login.html', this); return false;">Login</a>
<a href="#" onclick="carregarPagina('trocar-empresa.html', this); return false;">Trocar empresa</a>
<a href="#" onclick="carregarPagina('orcamentopedido.html', this); return false;">Fazer orçamentos | Pedidos</a>
<a href="#" onclick="carregarPagina('promocoes.html', this); return false;">Promoção</a>
<a href="#" onclick="carregarPagina('controle-pedido.html', this); return false;">Controle de pedido</a>
<a href="#" onclick="carregarPagina('atualizacao.html', this); return false;">Atualização</a>


  <hr style="margin:15px 0;border-color:#1e293b">

  <a href="../../index.html">⬅ Trocar sistema</a>

  <!-- LOGO NO RODAPÉ -->
  <div class="sidebar-footer">
    <a href="https://wa.me/5517996074665" target="_blank" rel="noopener noreferrer">
      <img src="../../assets/img/logo.png" alt="Lukma">
    </a>
    <p style="margin-top:15px;font-size:14px;color:#475569">
      Suporte
    </p>
  </div>
</aside>

<!-- CONTEÚDO DINÂMICO -->
<main class="content" id="content">
  <!-- Conteúdo carregado via JavaScript -->
</main>

<script>
function fecharTodosSubmenus() {
  document.querySelectorAll(".menu-group").forEach(group => {
    group.classList.remove("open");
    const parent = group.querySelector(".menu-parent");
    if (parent) parent.classList.remove("active");
  });
}

function toggleSubmenu(element) {
  const group = element.closest(".menu-group");
  const aberto = group.classList.contains("open");

  // Fecha tudo antes
  fecharTodosSubmenus();

  // Se não estava aberto, abre
  if (!aberto) {
    group.classList.add("open");
    element.classList.add("active");
  }
}

function carregarPagina(pagina, linkClicado = null) {
  fetch(pagina)
    .then(response => {
      if (!response.ok) throw new Error("Erro ao carregar");
      return response.text();
    })
    .then(html => {
      document.getElementById("content").innerHTML = html;

      // Remove todos os ativos
      document.querySelectorAll(".sidebar a").forEach(a => {
        a.classList.remove("active");
      });

      // Fecha todos os submenus ao trocar de menu
      fecharTodosSubmenus();

      if (linkClicado) {
        linkClicado.classList.add("active");

        // Se for submenu, mantém o pai aberto e ativo
        const group = linkClicado.closest(".menu-group");
        if (group) {
          group.classList.add("open");
          const parent = group.querySelector(".menu-parent");
          if (parent) parent.classList.add("active");
        }
      }
    })
    .catch(() => {
      document.getElementById("content").innerHTML = `
        <div class="tutorial-box">
          <h2>Erro</h2>
          <p>Não foi possível carregar o conteúdo.</p>
        </div>
      `;
    });
}

/* página inicio.html exibindo direto ao carregar*/
window.onload = () => {
  const primeiroLink = document.querySelector(".sidebar a[href='#']");
  carregarPagina("inicio.html", primeiroLink);
};
</script>

</body>
</html>
